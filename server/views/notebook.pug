//-
  Math Tablet
  Copyright (C) 2019 Public Invention
  https://pubinv.github.io/PubInv/

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.

extends layout

mixin menuBar
  #menu
    div
      button#debugMenu Debug
    div
      a(href='/') home
      | /
      each segment, i in pathSegments
        - const url = '/' + pathSegments.slice(0,i+1).join('/') + '/';
        a(href=url)= segment
        | /
      = notebookName
    div TBD

mixin sideBar
  #sideBar
    button#inputMathButton
      //- https://iconmonstr.com/text-8-svg/
      svg(viewBox="0 0 24 24")
        path(d="M24 5.469h-2.31c1.041-.867 2.178-1.907 2.178-3.26 0-1.342-.964-2.209-2.454-2.209-.813 0-1.63.238-2.317.769l.535 1.345c.444-.327.904-.614 1.475-.614.616 0 .955.299.955.84-.012.907-1.129 1.79-3.062 3.536v1.124h5v-1.531zm-7 16.531v2h-4.778l-3.751-5.938-3.521 5.938h-4.95v-2h1.08c.654 0 1.259-.358 1.594-.914l3.634-6.091-3.73-6.144c-.341-.531-.932-.853-1.568-.853h-1.01v-1.998h4.611l3.86 5.964 4.09-5.964h4.439v1.998h-.838c-.636 0-1.227.322-1.567.853l-3.96 6.144 3.864 6.091c.334.556.939.914 1.593.914h.908z")
    button#inputTextButton
      //- https://iconmonstr.com/text-1-svg/
      svg(viewBox="0 0 24 24")
        path(d="M22 0h-20v6h1.999c0-1.174.397-3 2.001-3h4v16.874c0 1.174-.825 2.126-2 2.126h-1v2h9.999v-2h-.999c-1.174 0-2-.952-2-2.126v-16.874h4c1.649 0 2.02 1.826 2.02 3h1.98v-6z")
    button#inputKeyboardButton
      //- https://iconmonstr.com/keyboard-2-svg/
      svg(viewBox="0 0 24 24")
        path(d="M22 7v10h-20v-10h20zm2-2h-24v14h24v-14zm-18 3h-3v2h3v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2zm-4 6h-10v2h10v-2zm4-3h-4v2h4v-2zm-14 0h-4v2h4v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2zm3 0h-2v2h2v-2z")
    .separator
    button#undoButton(disabled=true)
      //- https://iconmonstr.com/undo-4-svg/
      svg(viewBox="0 0 24 24")
        path(d="M17.026 22.957c10.957-11.421-2.326-20.865-10.384-13.309l2.464 2.352h-9.106v-8.947l2.232 2.229c14.794-13.203 31.51 7.051 14.794 17.675z")
    button#redoButton(disabled=true)
      //- https://iconmonstr.com/redo-4-svg/
      svg(viewBox="0 0 24 24")
        path(d="M6.974 22.957c-10.957-11.421 2.326-20.865 10.384-13.309l-2.464 2.352h9.106v-8.947l-2.232 2.229c-14.794-13.203-31.51 7.051-14.794 17.675z")
    .separator
    button#clearButton(disabled=true)
      //- https://iconmonstr.com/eraser-2-svg/
      svg(viewBox="0 0 24 24")
        path(d="M5.662 23l-5.369-5.365c-.195-.195-.293-.45-.293-.707 0-.256.098-.512.293-.707l14.929-14.928c.195-.194.451-.293.707-.293.255 0 .512.099.707.293l7.071 7.073c.196.195.293.451.293.708 0 .256-.097.511-.293.707l-11.216 11.219h5.514v2h-12.343zm3.657-2l-5.486-5.486-1.419 1.414 4.076 4.072h2.829zm6.605-17.581l-10.677 10.68 5.658 5.659 10.676-10.682-5.657-5.657z")
    button#convertButton(disabled=true)
      //- https://iconmonstr.com/arrow-13-svg/
      svg(viewBox="0 0 24 24")
        path(d="M24 12l-8.991 6.228v-2.722c2.54-1.757 5.053-3.506 5.053-3.506s-2.513-1.718-5.053-3.474v-2.722l8.991 6.196zm-6.96 0l-9.04-6.118v3.118h-8v6h8v3.118l9.04-6.118z")

block metatags
  //- These meta tags are copied from MyScript samples.
  meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")
  meta(name="apple-mobile-web-app-capable", content="yes")
  meta(name="mobile-web-app-capable", content="yes")
  meta(name="HandheldFriendly", content="true")

block styles
  link(rel='stylesheet', href='/stylesheets/myscript-4.3.0.min.css')
  link(rel='stylesheet', href='/stylesheets/katex-0.10.1.css')
  link(rel='stylesheet', href='/stylesheets/notebook.css')

block scripts
  script(src='/javascripts/pep-0.4.3.js')
  script(src='/javascripts/katex-0.10.1.js')
  script(src='/javascripts/myscript-4.3.0.min.js')
  script(type='module', src='/javascripts/app.js')

block content
  #debugWindow(style='display:none')
  +menuBar
  +sideBar
  #column
    #preview.thought
      .handle
      .status
      .formula
      button#insertButton(disabled=true) I

    #inputArea('data-applicationkey'=credentials.myscript.applicationKey, 'data-hmackey'=credentials.myscript.hmacKey)
      #inputText(style='display:none')
      #inputMath(style='display:none')
      #inputKeyboard(style='display:none')
        select()
          option(value='LATEX') LaTeX
          option(value='MATHJS', selected=true) MathJS
          option(value='MATHML') MathML
          option(value='TEXT') Text
          option(value='WOLFRAM') Wolfram
        input(type='text', placeholder="e.g. r = x^2 + y^2" size=60)
